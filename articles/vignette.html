<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>glmPredict • glmPredict</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="glmPredict">
<meta property="og:description" content="glmPredict">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">glmPredict</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/vignette.html">glmPredict</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="vignette_files/accessible-code-block-0.0.1/empty-anchor.js"></script><link href="vignette_files/anchor-sections-1.0/anchor-sections.css" rel="stylesheet">
<script src="vignette_files/anchor-sections-1.0/anchor-sections.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>glmPredict</h1>
            
      
      
      <div class="hidden name"><code>vignette.Rmd</code></div>

    </div>

    
    
<div id="glmpredict" class="section level1">
<h1 class="hasAnchor">
<a href="#glmpredict" class="anchor"></a>glmPredict</h1>
<p>glmPredict extends the functionality of the <code><a href="https://broom.tidymodels.org/reference/augment.glm.html">broom::augment.glm</a></code> function by making predictions of the target variable class. The <code>glm_predict</code> function makes these predictions. It requires a fitted <code>glm</code> model object with <code>family=binomial</code> or <code>family=quasibinomial</code> as input, as well as the name of the target variable. This is analogous to making predictions on Logistic Regression model. <code><a href="../reference/glm_predict.html">glm_predict()</a></code> also returns some statistics of the model predictions for analysis: accuracy, precision and recall. <br><br> The class is predicted by comparing the response (the predicted probability of the positive class) to a threshold, 0.5 by default. The <code>threshold</code> argument can be changed to specify a higher or lower threshold for predicting the positivei class. By default, the model will predict on the data present in the <code>glm</code> model, but a different dataset with the same feature variables can be passed to the function with the <code>newdata</code> argument to make predictions on a new dataset. <br><br> The <code>glmPredict</code> package also comes equipped with a toy dataset, <code>cancer_clean</code>, to use and test the functionality of <code><a href="../reference/glm_predict.html">glm_predict()</a></code>. <br><br> You can install the development version from <a href="https://github.com/janetxinli/glmPredict">GitHub</a> with:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span><span class="op">(</span><span class="st">"devtools"</span><span class="op">)</span>
<span class="fu">devtools</span><span class="fu">::</span><span class="fu">install_github</span><span class="op">(</span><span class="st">"janetxinli/glmPredict"</span><span class="op">)</span></code></pre></div>
<div id="basic-usage" class="section level3">
<h3 class="hasAnchor">
<a href="#basic-usage" class="anchor"></a>Basic Usage</h3>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va">glmPredict</span><span class="op">)</span></code></pre></div>
<p>You can learn more about modelling in R and Generalised Linear Models <a href="https://www.rdocumentation.org/packages/stats/versions/3.6.2/topics/glm">here</a>. For this demo, we’ll be working with the <code>cancer_clean</code> dataset. The <code>cancer_clean</code> dataset is a simplified version of the <a href="https://archive.ics.uci.edu/ml/datasets/Breast+Cancer+Wisconsin+(Diagnostic)">Breast Cancer Wisconsin Dataset</a>. <br><br> You can learn more about the dataset by typing <code><a href="../reference/cancer_clean.html">?cancer_clean</a></code> into your Rstudio console. Essentially, the dataset is a tibble with 569 rows and 11 columns. Each row represents measurements from a single breast mass biopsy image, and each column is a different metric describing the nuclei present in the image. The <code>malignant</code> column describes the final diagnosis of each sample, where 1 = malignant and 0 = benign. <br><br> First, we’ll start by subsetting <code>cancer_clean</code> by row.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/Random.html">set.seed</a></span><span class="op">(</span><span class="fl">123</span><span class="op">)</span>
<span class="va">subset_len</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html">floor</a></span><span class="op">(</span><span class="fl">0.75</span> <span class="op">*</span> <span class="fu"><a href="https://rdrr.io/r/base/nrow.html">nrow</a></span><span class="op">(</span><span class="va">cancer_clean</span><span class="op">)</span><span class="op">)</span>
<span class="va">subset_ind</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/sample.html">sample</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/seq.html">seq_len</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html">nrow</a></span><span class="op">(</span><span class="va">cancer_clean</span><span class="op">)</span><span class="op">)</span>, size<span class="op">=</span><span class="va">subset_len</span><span class="op">)</span>
<span class="va">cancer_subset</span> <span class="op">&lt;-</span> <span class="va">cancer_clean</span><span class="op">[</span><span class="va">subset_ind</span>,<span class="op">]</span>
<span class="va">cancer_new</span> <span class="op">&lt;-</span> <span class="va">cancer_clean</span><span class="op">[</span><span class="op">-</span><span class="va">subset_ind</span>,<span class="op">]</span></code></pre></div>
<p>Say we want to predict whether a sample will be classified as malignant or benign (y) by taking into account the mean texture and mean radius (x) of nuclei in each image. We can create a <code>glm</code> with the <code>cancer_subset</code> dataset and the formula <code>y ~ x</code>.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="op">(</span><span class="va">cancer_model</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/glm.html">glm</a></span><span class="op">(</span><span class="va">malignant</span> <span class="op">~</span> <span class="va">texture_mean</span> <span class="op">+</span> <span class="va">radius_mean</span>, data<span class="op">=</span><span class="va">cancer_subset</span>, family<span class="op">=</span><span class="st">"binomial"</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Call:  glm(formula = malignant ~ texture_mean + radius_mean, family = "binomial", </span>
<span class="co">#&gt;     data = cancer_subset)</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Coefficients:</span>
<span class="co">#&gt;  (Intercept)  texture_mean   radius_mean  </span>
<span class="co">#&gt;     -19.0491        0.2094        1.0021  </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Degrees of Freedom: 425 Total (i.e. Null);  423 Residual</span>
<span class="co">#&gt; Null Deviance:       551.5 </span>
<span class="co">#&gt; Residual Deviance: 219.8     AIC: 225.8</span></code></pre></div>
<p>Now if we want to see which samples in <code>cancer_subset</code> our model predicts are malignant, we can use the <code>glm_predict</code> function:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="op">(</span><span class="va">preds</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/glm_predict.html">glm_predict</a></span><span class="op">(</span><span class="va">cancer_model</span>, <span class="st">"malignant"</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; $augment</span>
<span class="co">#&gt; # A tibble: 426 x 11</span>
<span class="co">#&gt;    .rownames malignant texture_mean radius_mean .fitted  .resid .std.resid</span>
<span class="co">#&gt;    &lt;chr&gt;         &lt;dbl&gt;        &lt;dbl&gt;       &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;      &lt;dbl&gt;</span>
<span class="co">#&gt;  1 415               1         29.8       15.1  9.13e-1  0.425      0.429 </span>
<span class="co">#&gt;  2 463               0         27.0       14.4  7.38e-1 -1.64      -1.66  </span>
<span class="co">#&gt;  3 179               0         22.2       13.0  2.05e-1 -0.677     -0.680 </span>
<span class="co">#&gt;  4 526               0         13.1        8.57 4.45e-4 -0.0299    -0.0299</span>
<span class="co">#&gt;  5 195               1         23.2       14.9  6.69e-1  0.897      0.902 </span>
<span class="co">#&gt;  6 118               1         16.7       14.9  3.42e-1  1.47       1.47  </span>
<span class="co">#&gt;  7 299               0         18.2       14.3  2.78e-1 -0.808     -0.811 </span>
<span class="co">#&gt;  8 229               0         24.0       12.6  2.01e-1 -0.669     -0.674 </span>
<span class="co">#&gt;  9 244               0         23.8       13.8  4.28e-1 -1.06      -1.06  </span>
<span class="co">#&gt; 10 14                1         24.0       15.8  8.64e-1  0.540      0.543 </span>
<span class="co">#&gt; # … with 416 more rows, and 4 more variables: .hat &lt;dbl&gt;, .sigma &lt;dbl&gt;,</span>
<span class="co">#&gt; #   .cooksd &lt;dbl&gt;, .prediction &lt;dbl&gt;</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $accuracy</span>
<span class="co">#&gt; [1] 0.8896714</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $precision</span>
<span class="co">#&gt; [1] 0.8863636</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $recall</span>
<span class="co">#&gt; [1] 0.7852349</span></code></pre></div>
<p>Under the hood, <code><a href="../reference/glm_predict.html">glm_predict()</a></code> runs <code>augment.glm(type.predict="response")</code> on the model. This returns the predicted probability of each sample being in the positive class, and <code><a href="../reference/glm_predict.html">glm_predict()</a></code> compares this probability to a certain threshold to classify each sample as either positive (malignant) or negative (benign). The predictions are appended to the <code>augment.glm</code> tibble, and returned from the function. Also returned from the function are the accuracy, precision and recall of the predictions. These are different metrics that describe how well the model has classified the data.</p>
<p>All of the return data is bundled in a named list, so if you save the output of <code><a href="../reference/glm_predict.html">glm_predict()</a></code> to a variable like we did above, you can access the components any way you’d access a list:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">preds</span><span class="op">$</span><span class="va">augment</span>
<span class="co">#&gt; # A tibble: 426 x 11</span>
<span class="co">#&gt;    .rownames malignant texture_mean radius_mean .fitted  .resid .std.resid</span>
<span class="co">#&gt;    &lt;chr&gt;         &lt;dbl&gt;        &lt;dbl&gt;       &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;      &lt;dbl&gt;</span>
<span class="co">#&gt;  1 415               1         29.8       15.1  9.13e-1  0.425      0.429 </span>
<span class="co">#&gt;  2 463               0         27.0       14.4  7.38e-1 -1.64      -1.66  </span>
<span class="co">#&gt;  3 179               0         22.2       13.0  2.05e-1 -0.677     -0.680 </span>
<span class="co">#&gt;  4 526               0         13.1        8.57 4.45e-4 -0.0299    -0.0299</span>
<span class="co">#&gt;  5 195               1         23.2       14.9  6.69e-1  0.897      0.902 </span>
<span class="co">#&gt;  6 118               1         16.7       14.9  3.42e-1  1.47       1.47  </span>
<span class="co">#&gt;  7 299               0         18.2       14.3  2.78e-1 -0.808     -0.811 </span>
<span class="co">#&gt;  8 229               0         24.0       12.6  2.01e-1 -0.669     -0.674 </span>
<span class="co">#&gt;  9 244               0         23.8       13.8  4.28e-1 -1.06      -1.06  </span>
<span class="co">#&gt; 10 14                1         24.0       15.8  8.64e-1  0.540      0.543 </span>
<span class="co">#&gt; # … with 416 more rows, and 4 more variables: .hat &lt;dbl&gt;, .sigma &lt;dbl&gt;,</span>
<span class="co">#&gt; #   .cooksd &lt;dbl&gt;, .prediction &lt;dbl&gt;</span>
<span class="va">preds</span><span class="op">[</span><span class="st">"precision"</span><span class="op">]</span>
<span class="co">#&gt; $precision</span>
<span class="co">#&gt; [1] 0.8863636</span>
<span class="va">preds</span><span class="op">[[</span><span class="st">"recall"</span><span class="op">]</span><span class="op">]</span>
<span class="co">#&gt; [1] 0.7852349</span>
<span class="va">preds</span><span class="op">[</span><span class="fl">2</span><span class="op">]</span>
<span class="co">#&gt; $accuracy</span>
<span class="co">#&gt; [1] 0.8896714</span></code></pre></div>
</div>
</div>
<div id="add-threshold-newdata-stuff" class="section level1">
<h1 class="hasAnchor">
<a href="#add-threshold-newdata-stuff" class="anchor"></a>Add threshold, newdata stuff</h1>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Janet Li.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
